<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="generator" content="goffre"/>
        <meta name="viewport" content="width=device-width,minimum-scale=1.0,initial-scale=1,user-scalable=yes"/>
        <title>Goffre | Mini static site generator</title>
        <meta name="description" content="Goffre is a minimal static site generator available to the node.js ecosystem." />
        <link rel="stylesheet" href="https://moonwave99.github.io/goffre/bundle.css"></link>
    </head>
    <body class="page-index">
        <nav>
            <ul>
                <li>
                    <a href="https://moonwave99.github.io/goffre/" class="index current">Home</a>            
                </li>
                <li>
                    <a href="https://moonwave99.github.io/goffre//docs" class="docs">Docs</a>            
                </li>
                <li>
                    <a href="https://github.com/moonwave99/goffre" target="_blank" rel="noopener noreferrer">See on Github</a>            
                </li>
            </ul>
            <button></button>
        </nav>
        <main>
        <section class="page text">
    <section class="text-body">
        <h1 id="goffre">Goffre</h1>
<p>Goffre is a minimal static site generator available to the <strong>node.js</strong> ecosystem.</p>
<p>It uses <a href="https://handlebarsjs.com/">handlebars</a> as templating system and <a href="https://www.google.com/search?q=markdown+frontmatter">markdown + frontmatter</a> as data layer, or whatever you decide to pass to <code>render()</code>.</p>
<h2 id="installation">Installation</h2>
<pre><code class="language-bash">$ npm install goffre --save
</code></pre>
<h2 id="basic-usage">Basic Usage</h2>
<pre><code class="language-js">import path from &quot;path&quot;;
import { load, render } from &quot;goffre&quot;;

// dist folder
const buildPath = path.join(__dirname, &quot;dist&quot;);
// data folder with markdown files
const dataPath = path.join(__dirname, &quot;data&quot;);
// views folder with handlebars files
const viewsPath = path.join(__dirname, &quot;src&quot;, &quot;views&quot;);

(async () =&gt; {
    console.log(`Getting data from ${dataPath}:`);
    const { pages } = await load({ dataPath });

    try {
        const results = await render({
            buildPath,
            viewsPath,
            pages,
        });
        console.log(`Generated ${results.length} pages`);
    } catch (error) {
        console.log(&quot;Error generating site&quot;, error);
    }
})();
</code></pre>
<p>See the <a href="https://github.com/moonwave99/goffre/tree/main/example">example on github</a> for a more advanced use case, and the <a href="https://moonwave99.github.io/goffre/docs">documentation</a> for the complete reference.</p>
<h2 id="data-collecting-and-rendering-are-separate-steps">Data collecting and rendering are separate steps</h2>
<p>This is the key for the maximum flexibility: <code>load()</code> gets all the <code>.md</code> files inside the <code>dataPath</code> folder, and populates its return <code>pages</code> each with a unique <code>slug</code>.</p>
<p>The markdown body is available in the <code>content</code> key, and the YAML front matter is destructured - the output of <code>load()</code> of the following file:</p>
<pre><code class="language-yaml">---
title: &quot;Goffre | Mini static site generator&quot;
slug: &quot;index&quot;
---
Goffre is a minimal static site generator available to the **node.js** ecosystem.
</code></pre>
<p>will be:</p>
<pre><code class="language-js">{
    title: &quot;Goffre | Mini static site generator&quot;,
    slug: &quot;index&quot;,
    content: &quot;Goffre is a minimal static site generator available to the **node.js** ecosystem.&quot;
}
</code></pre>
<p><strong>Note:</strong> the markdown body is not yet parsed at this stage.</p>
<p>The <code>render()</code> method writes then every incoming page to <code>{page.slug}.html</code> - you can add further pages to the collected ones, like the text you are reading from the main <code>README.md</code> file of the repository:</p>
<pre><code class="language-js">const { pages } = await load({ dataPath });
const results = await render({
    buildPath,
    sitePath,
    pages: [
        ...pages,
        {
            title: &quot;Goffre | Mini static site generator&quot;,
            description:
                &quot;Goffre is a minimal static site generator available to the node.js ecosystem.&quot;,
            slug: &quot;index&quot;,
            content: await readFile(path.join(&quot;..&quot;, &quot;README.md&quot;), &quot;utf8&quot;),
        },
    ],
});
</code></pre>
<h2 id="for-a-better-development-experience">For a better development experience</h2>
<p>Goffre does not provide any watching / serving features out of the box, but don&#39;t worry.</p>
<p><strong>Serving</strong>: if you use <a href="https://webpack.js.org/">webpack</a> for bundling the frontend CSS and JS, just use its <a href="https://webpack.js.org/configuration/dev-server/">dev server</a> - see the <a href="https://github.com/moonwave99/goffre/blob/main/homepage/webpack.config.cjs">configuration file for this very page</a> as reference. If you don&#39;t, a simple <a href="https://www.npmjs.com/package/http-server">http-server</a> will do.</p>
<p><strong>Watching</strong>: use <a href="https://www.npmjs.com/package/nodemon">nodemon</a> to watch the <em>generation script</em>, the <em>data folder</em> and the <em>handlebars views folder</em>:</p>
<pre><code class="language-bash">$ nodemon -e js,json,md,handlebars --watch index.js --watch data --watch src/views
</code></pre>
<p>The scripts of <code>package.json</code> will look more or less like:</p>
<pre><code class="language-json">{
    &quot;clean&quot;: &quot;rm -rf dist&quot;,
    &quot;dev:client&quot;: &quot;webpack serve --mode development&quot;,
    &quot;dev:site&quot;: &quot;nodemon -e js,json,md,handlebars --watch index.js --watch data --watch src/views&quot;,
    &quot;build:client&quot;: &quot;webpack --mode production&quot;,
    &quot;build:site&quot;: &quot;node index.js&quot;
}
</code></pre>
<p>Just <code>npm run dev:client</code> and <code>npm run dev:site</code> in two terminal tabs and you are done. Don&#39;t forget to <code>npm install</code> the needed dependencies of course!</p>
<h2 id="roadmap">Roadmap</h2>
<ul>
<li><input checked="" disabled="" type="checkbox"> homepage</li>
<li><input disabled="" type="checkbox"> docs</li>
<li><input disabled="" type="checkbox"> finish basic unit testing</li>
<li><input disabled="" type="checkbox"> e2e tests</li>
</ul>
<h2 id="todo">Todo</h2>
<ul>
<li><input disabled="" type="checkbox"> sitePath -&gt; viewsPath</li>
<li><input disabled="" type="checkbox"> make nav current class configurable</li>
<li><input disabled="" type="checkbox"> move slug generation strategy to render (maybe)</li>
</ul>

    </section>
</section>
        </main>

        <footer>
            <p>&copy; 2021 <a href="https://github.com/moonwave99">Diego Caponera</a>.</p>
        </footer>        <script src="https://moonwave99.github.io/goffre/bundle.js"></script>
    </body>
</html>